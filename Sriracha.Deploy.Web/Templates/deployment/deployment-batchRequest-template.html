<fieldset>
	<legend>Selected Components</legend>
	<table class="table table-striped table-bordered">
		<thead>
			<tr>
				<th>Execution Order</th>
				<th>Build</th>
				<th>Machines</th>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="item in selectedItems">
				<td>{{$index+1}}
					<button class="btn" ng-disabled="$index==0" ng-click="moveItemUp(item)"><i class="icon-arrow-up"></i></button>
					<button class="btn" ng-disabled="$index==(selectedItems.length-1)" ng-click="moveItemDown(item)"><i class="icon-arrow-down"></i></button>
					<button class="btn btn-danger" ng-click="removeItem(item)"><i class="icon-trash"></i></button>
				</td>
				<td>
					<div>
						{{item.build.displayValue}}
					</div>	
					<div>
						Select a different build: <select ng-model="item.build" ng-options="x as x.displayValue for x in item.availableBuildList | orderBy:'-displayValue'" ng-change="test(item)"></select>
					</div>
				</td>
				<td>
					<ul>
						<li ng-repeat="machine in item.machineList">{{machine.machineName}}</li>
					</ul>
				</td>
			</tr>
		</tbody>
	</table>
</fieldset>
<fieldset>
	<legend>Add Build</legend>
	<table class="table table-bordered">
		<colgroup>
			<col style="width:400px">
			<col style="width:400px">
		</colgroup>
		<thead>
			<tr>
				<th>What</th>
				<th>Where</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td style="vertical-align:top">
					<div>
						<b>Project:</b>
						<select ng-model="project" ng-options="item as item.projectName for item in projectList | orderBy:'projectName'" ng-change="refreshBuildList()"></select>
					</div>
					<div>
						<b>Branch:</b>
						<select ng-model="branch" ng-options="item as item.branchName for item in project.branchList | orderBy:'-branchName'" ng-change="refreshBuildList()"></select>
					</div>
					<div>
						<b>Component:</b>
						<select ng-model="component" ng-options="item as item.componentName for item in project.componentList | orderBy:'componentName'" ng-change="refreshBuildAndEnvironmentList()"></select>
					</div>
					<div>
						<b>Build:</b>
						<select ng-model="build" ng-options="item as item.displayValue for item in buildList | orderBy:'-displayValue'" ng-change="buildSelected()" ></select>
					</div>
				</td>
				<td style="vertical-align:top">
					<div>
						<b>Environment:</b>
						<select ng-model="environment" ng-options="item as item.environmentName for item in environmentList" ng-change="environmentSelected()" />
					</div>
					<div>
						<b>Machines:</b>
						<select-environment-machines buildId="{{idValues.buildId}}" environmentId="{{idValues.environmentId}}" selection="selection">a</select-environment-machines>
					</div>
				</td>
			</tr>
			<tr>
				<td colspan="2" style="text-align:center">
					<button class="btn btn-primary" ng-click="addBuildToBatch()" ng-disabled="!canAddBuild()">Add Build</button>
				</td>
			</tr>
		</tbody>
	</table>
</fieldset>
<center>
	<button class="btn btn-primary" ng-click="submitBuildRequest()" ng-disabled="!selectedItems.length">Submit Deployment Request</button>
</center>
