<h1>Deployments</h1>

<a ng-href="{{navigator.deployment.batchRequest.clientUrl()}}">Submit Batch Deploy Request</a>

<div ng-show="false" ng-repeat="deployment in deploymentList.items" style="border: 1px solid grey; border-radius: 5px; padding: 10px 10px 10px 10px; margin: 10px 10px 10px 10px">
	<a ng-href="{{navigator.deployment.batchStatus.clientUrl(deployment.request.id)}}"><h3>{{deployment.request.deploymentLabel}}</h3></a>
	<div>
		<b>Status:</b> {{deployment.request.statusDisplayValue}}
	</div>
	<div style="font-style:italic">
		{{deployment.request.lastStatusMessage}}
	</div>
</div>

<table class="table table-bordered table-striped">
	<thead>
		<tr>
			<th>Status</th>
			<th>Label</th>
			<th>Submitted Date</th>
			<th>Started Date</th>
			<th>Completed Date</th>
			<th>Details</th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		<tr ng-repeat="deployment in deploymentList.items">
			<td>
                <div class="{{getDeployStatusIconClass(deployment.request.status)}}">
                </div>
                {{getDeployStatusDescription(deployment.request.status)}}
			</td>
			<td>{{deployment.request.deploymentLabel}}</td>
			<td>{{deployment.request.submittedDateTimeUtc | displayDate}}</td>
-			<td>{{deployment.request.startedDateTimeUtc | displayDate}}</td>
			<td>{{deployment.request.completeDateTimeUtc | displayDate}}</td>
			<td>
				<div ng-repeat="item in deployment.request.itemList">
					<b>{{item.build.displayValue}}-></b>
					<ul>
						<li ng-repeat="machine in item.machineList">{{machine.machineName}}</li>
					</ul>
				</div>
			</td>
			<td>
                <div>
                    <a ng-href="{{navigator.deployment.batchStatus.clientUrl(deployment.request.id)}}">View</a>
                </div>
                <div>
                    <a ng-href="{{navigator.deployment.batchCopy.clientUrl(deployment.request.id)}}">Re-deploy</a>
                </div>
			</td>
		</tr>
	</tbody>
</table>

<pager paged-list="deploymentList" go-to-page="goToPage"></pager>